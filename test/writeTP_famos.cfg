
process PROTPGD  = {
# ecal mapping
  include "Geometry/EcalMapping/data/EcalMapping.cfi"
  include "Geometry/EcalMapping/data/EcalMappingRecord.cfi"

# Magnetic field full setup
   include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"

# Calo geometry service model
   include "Geometry/CaloEventSetup/data/CaloGeometry.cfi"

# Calo geometry service model
   include "Geometry/CaloEventSetup/data/EcalTrigTowerConstituents.cfi"

# IdealGeometryRecord
   include "Geometry/CMSCommonData/data/cmsIdealGeometryXML.cfi"


include "CalibCalorimetry/Configuration/data/Ecal_FakeConditions.cff"

include  "SimCalorimetry/EcalTrigPrimProducers/data/ecalTriggerPrimitiveDigis.cff"

	source = PoolSource { 
		untracked vstring fileNames =
	    {'file:/tmp/uberthon/tpg2/famos_input2.root'}
	}

        untracked PSet maxEvents = {untracked int32 input = 100}

	module out = PoolOutputModule {	
	       untracked string fileName = 'file:TrigPrim_famos.root' 
#               untracked vstring outputCommands = {
#                 "drop *_*_*_*",
#                "keep *_simEcalTriggerPrimitiveDigis_*_*",
#                 "keep *_ecalDigis_*_*",
#                 "keep *_ecalRecHit_*_*",
#                 "keep *_ecalWeightUncalibRecHit_*_*",
#                 "keep PCaloHits_*_EcalHitsEB_*",
#                 "keep PCaloHits_*_EcalHitsEE_*",
#                 "keep edmHepMCProduct_*_*_*"
#               }
	}
        service = MessageLogger {
#         untracked vstring debugModules = {   "simEcalTriggerPrimitiveDigis"   }
#         untracked vstring categories    =    { "EcalTPG"}

#         untracked vstring destinations =  {    "cout"  }
#         untracked PSet cout   =  {
#                 untracked string threshold = "DEBUG"
#                 untracked PSet DEBUG ={untracked int32 limit = 0}
#                 untracked PSet EcalTPG ={untracked int32 limit = 1000000000000}
#         }
      }

	path p = {simEcalTriggerPrimitiveDigis}
        endpath outpath = {out }

       replace ecalTriggerPrimitiveDigis.Famos=true
       replace ecalTriggerPrimitiveDigis.Label="RecHits"
 
     service = ProfilerService {
       untracked int32 firstEvent = 1
       untracked int32 lastEvent = 10
       untracked vstring paths = { "p"}
      }
}
