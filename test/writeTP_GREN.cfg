
process PROTPGD  = {
# ecal mapping
  include "Geometry/EcalMapping/data/EcalMapping.cfi"
  include "Geometry/EcalMapping/data/EcalMappingRecord.cfi"

# magnetic field
   include "Configuration/StandardSequences/data/MagneticField.cff"

# Calo geometry service model
   include "Geometry/CaloEventSetup/data/CaloGeometry.cfi"

# Calo geometry service model
   include "Geometry/CaloEventSetup/data/EcalTrigTowerConstituents.cfi"

# IdealGeometryRecord
   include "Geometry/CMSCommonData/data/cmsIdealGeometryXML.cfi"


include "CalibCalorimetry/Configuration/data/Ecal_FakeConditions.cff"

#include  "SimCalorimetry/EcalTrigPrimProducers/data/ecalTriggerPrimitiveDigis.cff"
include  "SimCalorimetry/EcalTrigPrimProducers/data/ecalTriggerPrimitiveDigis_with_suppressed.cff"
	source = PoolSource 
   { untracked vstring fileNames =
#     {'rfio:/castor/cern.ch/cms/store/mc/2007/9/11/RelVal-RelValSingleElectronPt35-1189521644/0000/4299AD63-5661-DC11-800C-001731AF6867.root'}
    {'rfio:/castor/cern.ch/cms/store/mc/2007/11/15/RelVal-RelValSingleMuMinusPt1-1195137779/0000/22F6D4B1-DF93-DC11-A2EF-000423D94494.root'}
   }

        untracked PSet maxEvents = {untracked int32 input = 500}

	module out = PoolOutputModule {	
	       untracked string fileName = "TrigPrim2.root" 
               untracked vstring outputCommands = {
                 "drop *_*_*_*",
                 "keep *_ecalTriggerPrimitiveDigis_*_*",
                 "keep *_ecalDigis_*_*",
                 "keep *_ecalRecHit_*_*",
                 "keep *_ecalWeightUncalibRecHit_*_*",
                 "keep PCaloHits_*_EcalHitsEB_*",
                 "keep PCaloHits_*_EcalHitsEE_*",
                 "keep edmHepMCProduct_*_*_*"
               }
	}

        service = MessageLogger {}


	path p = {ecalTriggerPrimitiveDigis}
        endpath outpath = { out }

   replace EcalTrigPrimESProducer.DatabaseFile = "TPG_MIPs.txt"  # special file for GREN

}
