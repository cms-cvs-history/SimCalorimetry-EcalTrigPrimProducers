
process PROTPGD  = {
# ecal mapping
  include "Geometry/EcalMapping/data/EcalMapping.cfi"

# Magnetic field full setup
   include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"

# Calo geometry service model
   include "Geometry/CaloEventSetup/data/CaloGeometry.cfi"

# Calo geometry service model
   include "Geometry/CaloEventSetup/data/EcalTrigTowerConstituents.cfi"

# IdealGeometryRecord
   include "Geometry/CMSCommonData/data/cmsIdealGeometryXML.cfi"


include "CalibCalorimetry/Configuration/data/Ecal_FakeConditions.cff"

include  "SimCalorimetry/EcalTrigPrimProducers/data/ecalTriggerPrimitiveDigis_with_suppressed.cff"
#include  "SimCalorimetry/EcalTrigPrimProducers/data/ecalTriggerPrimitiveDigis.cff"

	source = PoolSource 
      { untracked vstring fileNames = {
'rfio:/castor/cern.ch/cms/store/relval/2008/3/12/RelVal-RelValQCD_Pt_30_50-1205351746/0000/045D2CA8-91F0-DC11-AD70-001617DBD230.root'
	}
#   { untracked vstring fileNames =
#	{'file:/data/uberthon/tpg/4299AD63-5661-DC11-800C-001731AF6867.root'}
#	{'rfio:/castor/cern.ch/cms/store/relval/2008/3/20/RelVal-RelValSingleElectronPt35-1205894772-HLT/0000/1221CE67-30F6-DC11-81BC-000423D9853C.root'}
   }

        untracked PSet maxEvents = {untracked int32 input = 500}

	module out = PoolOutputModule {	
	       untracked string fileName = "TrigPrim.root" 
               untracked vstring outputCommands = {
                 "drop *_*_*_*",
                 "keep *_ecalTriggerPrimitiveDigis_*_*",
                 "keep *_ecalDigis_*_*",
                 "keep *_ecalRecHit_*_*",
                 "keep *_ecalWeightUncalibRecHit_*_*",
                 "keep PCaloHits_*_EcalHitsEB_*",
                 "keep PCaloHits_*_EcalHitsEE_*",
                 "keep edmHepMCProduct_*_*_*"
               }
	}

        service =Timing{}
        service = SimpleMemoryCheck{ }
        service = MessageLogger {
           untracked vstring debugModules = {   "ecalTriggerPrimitiveDigis"   }
           untracked vstring categories    =    { "EcalTPG"}

         untracked vstring destinations =  {    "cout"  }
         untracked PSet cout   =  {
                 untracked string threshold = "DEBUG"
                 untracked PSet DEBUG ={untracked int32 limit = 0}
                 untracked PSet EcalTPG ={untracked int32 limit = 1000000000000}
         }
      }

	path p = {ecalTriggerPrimitiveDigis}
        endpath outpath = { out }
#        replace EcalTrigPrimESProducer.DatabaseFile = "TPG_startup.txt"
#        replace ecalTriggerPrimitiveDigis.Debug=true
#        replace ecalTriggerPrimitiveDigis.TcpOutput=true
    }
