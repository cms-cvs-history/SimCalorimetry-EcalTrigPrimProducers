
process PROTPGD  = {
# ecal mapping
  include "Geometry/EcalMapping/data/EcalMapping.cfi"

# Magnetic field full setup
   include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"

# Calo geometry service model
   include "Geometry/CaloEventSetup/data/CaloGeometry.cfi"

# Calo geometry service model
   include "Geometry/CaloEventSetup/data/EcalTrigTowerConstituents.cfi"

# IdealGeometryRecord
   include "Geometry/CMSCommonData/data/cmsIdealGeometryXML.cfi"


include "CalibCalorimetry/Configuration/data/Ecal_FakeConditions.cff"

#include  "SimCalorimetry/EcalTrigPrimProducers/data/ecalTriggerPrimitiveDigis_with_suppressed.cff"
include  "SimCalorimetry/EcalTrigPrimProducers/data/ecalTriggerPrimitiveDigis.cff"

	source = PoolSource 
   { untracked vstring fileNames =
	{'rfio:/castor/cern.ch/cms/store/relval/2008/2/4/RelVal-SingleElectronPt35-1202115095-HLT/0000/6EE0B97A-52D3-DC11-8BA8-000423D985B0.root',
	    'rfio:/castor/cern.ch/cms/store/relval/2008/2/4/RelVal-SingleElectronPt35-1202115095-HLT/0000/AEB9CAE2-51D3-DC11-9D5C-001617C3B6E2.root'}
   }

        untracked PSet maxEvents = {untracked int32 input = 5}

	module out = PoolOutputModule {	
	       untracked string fileName = "TrigPrim.root" 
               untracked vstring outputCommands = {
                 "drop *_*_*_*",
                 "keep *_ecalTriggerPrimitiveDigis_*_*",
                 "keep *_ecalDigis_*_*",
                 "keep *_ecalRecHit_*_*",
                 "keep *_ecalWeightUncalibRecHit_*_*",
                 "keep PCaloHits_*_EcalHitsEB_*",
                 "keep PCaloHits_*_EcalHitsEE_*",
                 "keep edmHepMCProduct_*_*_*"
               }
	}

        service =Timing{}
        service = SimpleMemoryCheck{ }
        service = MessageLogger {
           untracked vstring debugModules = {   "ecalTriggerPrimitiveDigis"   }
           untracked vstring categories    =    { "EcalTPG"}

         untracked vstring destinations =  {    "cout"  }
#         untracked PSet cout   =  {
#                 untracked string threshold = "DEBUG"
#                 untracked PSet DEBUG ={untracked int32 limit = 0}
#                 untracked PSet EcalTPG ={untracked int32 limit = 1000000000000}
#         }
      }

	path p = {ecalTriggerPrimitiveDigis}
        endpath outpath = { out }

#        replace ecalTriggerPrimitiveDigis.Debug=true
#        replace ecalTriggerPrimitiveDigis.TcpOutput=true
}
