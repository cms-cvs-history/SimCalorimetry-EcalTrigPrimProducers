
process PROTPGD  = {

# Magnetic field full setup

   include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"

# Calo geometry service model

   include "Geometry/CaloEventSetup/data/CaloGeometry.cfi"

# Calo geometry service model
   include "Geometry/CaloEventSetup/data/EcalTrigTowerConstituents.cfi"

include "Geometry/CaloEventSetup/test/data/testCaloConfiguration.cfi"

 	source = PoolSource { 
		untracked vstring fileNames = {'file:evtgen_detsim_added-digi.root'}
#		untracked vstring fileNames = {'file:electrongun100GeV_detsim_ecalRecHits.root'}
		untracked int32 maxEvents = -1
	}

	module out = PoolOutputModule {	
	       untracked string fileName = 'file:TrigPrim.root'
	}

	module tp = EcalTrigPrimProducer {
                untracked bool Validation=true 
        	string Label = "ecaldigi"
	        int32 FgvbMinEnergy = 50
        }

	path p = {tp}
        endpath outpath = { out }

        service = MessageLogger
        {
#            untracked vstring destinations = {"cout"}
# triggers geometry debug!!!          untracked vstring debugModules = {   "tp"   }
      
            #vstring categories = { "FwkJob" }

#            untracked PSet cout = { untracked PSet default = { untracked int32 limit = 0 }    # kill all messages in the log
                    #PSet FwkJob  = { int32 limit = -1 }  # except *all* of FwkJob's	  
#        }
      
        #untracked vstring fwkJobReports = {"FrameworkJobReport.xml"}
        }

}
