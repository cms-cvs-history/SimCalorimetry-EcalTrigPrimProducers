process ANALYSEMIP = {
include "CalibCalorimetry/EcalTPGTools/data/ecalTPGScale.cff"

# ECAL Unpacker
include "EventFilter/EcalRawToDigiDev/data/EcalUnpackerMapping.cfi"
include "EventFilter/EcalRawToDigiDev/data/EcalUnpackerData.cfi"

# ECAL TPG Producer
include "SimCalorimetry/EcalTrigPrimProducers/data/ecalTriggerPrimitiveDigis_CosmicsConfiguration.cff"

# ECAL TPG Analyzer
include "Geometry/CaloEventSetup/data/CaloGeometry.cff"
include "Geometry/CaloEventSetup/data/EcalTrigTowerConstituents.cfi"
include "Geometry/CMSCommonData/data/cmsIdealGeometryXML.cfi"

# input
untracked PSet maxEvents = {untracked int32 input = 2}

source = NewEventStreamFileReader{
    untracked vstring fileNames = 
    { "file:/afs/cern.ch/user/p/paganini/Data/ecal_local.00038343.0001.A.storageManager.0.0000.dat"}
}

# Analyser module
module tpAnalyzer = EcalTrigPrimAnalyzerMIPs {
   string Label = "ecalEBunpacker"
   string Producer = "EBTT"
   string DigiLabel = "ecalEBunpacker"
   string DigiProducer = "ebDigis"
   string EmulLabel = "simEcalTriggerPrimitiveDigis"
   string EmulProducer = ""
}


path p = { ecalEBunpacker
           , simEcalTriggerPrimitiveDigis
           , tpAnalyzer
         }

}
